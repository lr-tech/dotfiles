#!/usr/bin/env bash
set -f

BOLD=$(tput bold)
RED=$(tput setaf 1)
GREEN=$(tput setaf 2)
BLUE=$(tput setaf 4)
WHITE=$(tput setf 7)
NORMAL=$(tput sgr0)

while getopts 'elLp:' OPTION; do
    case "$OPTION" in
        e)  # lf echomsg
            echomsg() { lf -remote "send $id echomsg $1"; }
            [ $2 -eq 0 ] && echomsg "${GREEN}$3${NORMAL}" || echomsg "${RED}$4${NORMAL}" ;;

        l)  # list files
            clear
            echo -n "$2" | awk '{ print "\""$0"\""}';;

        p)  # prompt
            read -n1 -p "${BOLD}${GREEN}==>${NORMAL}${BOLD} $2 [y/N] ${NORMAL}" answer && echo ''
            [ -n $answer -a $answer = 'y' ] && exit 0 || exit 1 ;;

        ?) exit 1 ;;
    esac
done
